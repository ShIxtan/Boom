<!DOCTYPE HTML>
<html>
<head>
  <title>boom</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/2.2.2/phaser.min.js"></script>
</head>
<body>
  <script>

  var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });
  var bmd
  var unclicked = true;

  function randomPos(){
    return [Math.random() * 800, Math.random() * 600]
  }

  function addCircle(pos){
    cir = circles.create(pos[0], pos[1], bmd)
    cir.anchor.setTo(0.5, 0.5);
    game.physics.arcade.enable(cir)
    cir.body.velocity.x = game.rnd.integerInRange(-100, 100);
    cir.body.velocity.y = game.rnd.integerInRange(-100, 100);
    cir.body.bounce.setTo(1, 1);
    cir.body.collideWorldBounds = true;
    cir.tint = '0x' + Math.floor(Math.random()*16777215).toString(16);
    return cir;
  }

  function preload() {
    bmd = game.add.bitmapData(20,20);

    // Draw circle
    bmd.ctx.fillStyle = '#999999';
    bmd.ctx.beginPath();
    bmd.ctx.arc(10, 10, 10, 0, Math.PI*2, true);
    bmd.ctx.closePath();
    bmd.ctx.fill();
  }

  var circles;

  function create() {
    game.physics.startSystem(Phaser.Physics.ARCADE);
    circles = game.add.group();

    for (var i = 0; i < 10; i++){
      var pos = randomPos();
      addCircle(pos)
    }
  }

  function update() {
    if (game.input.mousePointer.isDown && unclicked) {
      cir = addCircle([game.input.x, game.input.y])
      expand(cir)
      unclicked = false;
    }
  }

  function expand(circle){
    circle.body.velocity.x = 0;
    circle.body.velocity.y = 0;
    circle.scale.setTo(4,4);
    setTimeout(function(){
      circle.kill();
    }, 2000)
  }

  </script>

  </body>
</html>
